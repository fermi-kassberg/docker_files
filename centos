FROM docker.io/centos:8 AS build

RUN set -ex
RUN dnf update -y && dnf install -y \
    wget \
    vim \
    nano \
    tmux \
    bash-completion \
    bind-utils \
    nc \
    git

COPY configs/kubectl /usr/local/bin/
COPY configs/helm /usr/local/bin/
COPY configs/.* /root/

RUN kubectl completion bash >> /root/.bash_completion
RUN echo "if [ -f /etc/bashrc ]; then . /etc/bashrc; fi" >> /root.bashrc
RUN echo "export PS1='[\e[92mcentos\e[0m \w] # '" >> /root/.bashrc

WORKDIR /root

# This results in a single layer image
FROM scratch
COPY --from=build / /
WORKDIR /root
