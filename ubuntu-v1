FROM ubuntu:bionic

RUN echo "export PS1='[\e[92mubuntu\e[0m \w] # '" >> /root/.bashrc
RUN echo "set -uo pipefail" >> /root/.bashrc

RUN set -xeu
RUN apt-get update \
&& apt-get install -y \
apt-transport-https \
curl \
wget \
apt-utils \
gnupg2 \
vim \
nano \
less \
dnsutils \
iputils-ping \
ca-certificates

WORKDIR /root

RUN \
curl -kLo kubectl \
https://storage.googleapis.com/kubernetes-release/release/\
$(curl -ks https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl

RUN chmod +x kubectl \
&& ln -s /root/kubectl /usr/local/bin/kubectl

RUN \
curl -k https://baltocdn.com/helm/signing.asc | apt-key add - \
&& echo "deb [trusted=yes] https://baltocdn.com/helm/stable/debian/ all main" | tee /etc/apt/sources.list.d/helm-stable-debian.list \
&& apt-get update \
&& apt-get install helm
